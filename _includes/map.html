<!-- 
    https://davidjvitale.com/tech/jekyll-leaflet/
    https://leafletjs.com/examples/quick-start/
    https://leaflet-extras.github.io/leaflet-providers/preview/

-->
<div id="map"></div>
<script>
    var map = new L.Map("map", {
        center: new L.LatLng(20, 11.3426),
        zoom: 2,
    });
    var layer = new L.StamenTileLayer("toner-lite");
    map.addLayer(layer);

    map.gestureHandling.enable();

    var mark = L.icon({
        iconUrl: '/assets/icon/map_pin.png',
        iconSize:     [38, 95], // size of the icon
    });
    var mark_nok = L.icon({
        iconUrl: '/assets/icon/map_pin_dark.png',
        iconSize:     [38, 95], // size of the icon
    });

    {%- for post in site.posts -%}
        {% if post.location.latitude and post.location.longitude %}
            {% if post.location.ok %}
                L.marker([ {{post.location.latitude}}, {{post.location.longitude}} ], { title: '{{post.title}}', icon: mark}).addTo(map).on('click', function(e) { window.open('{{post.url | relative_url}}','_self'); });
            {% else %}
                L.marker([ {{post.location.latitude}}, {{post.location.longitude}} ], { title: '{{post.title}}', icon: mark_nok}).addTo(map).on('click', function(e) { window.open('{{post.url | relative_url}}','_self'); });
            {% endif %}
        {% endif %}
    {% endfor %}

</script>
